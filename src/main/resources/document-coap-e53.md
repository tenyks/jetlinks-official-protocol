# 1. 协议能力说明
* 支持配置式消息结构；
* 支持通信交互策略；
  
# 2. 兼容协议
E53 IAx板通信协议

## 2.1 E53 IA2消息报文字节结构
|名称|编码|值类型|说明|
|---|---|---|---|
|协议及版本标识|MagicId|UINT16|E53 IA2板：`0xFA11`|
|消息ID|MassageId|UINT16|用于消息去重和关联|
|消息类型|MessageType|UINT8|用于标识物模型的服务，参考物模型服务定义中 __消息类型__|
|输入/输出参数负载总字节数|IOParamsLength|UINT16||
|参数1|IOParam1|参考响应消息物模型的定义||
|参数N|IOParamN|参考响应消息物模型的定义||

* 多字节数据类型 __big-endian__ 传输顺序

# 3. 物模型

## 3.1 属性

|名称|编码|值类型|说明|
|---|---|---|---|
|温度|temperature|float|单位：摄氏度|
|相对湿度|humidity|float|单位：RH%|
|亮度|luminance|float|单位：流明|
|低水位标志|lowWaterMark|UINT8|0=不是，1=是|
|高水位标志|highWaterMark|UINT8|0=不是，1=是|
|外设工作标志|workingFlag|UINT16|0=停止，1=运行中, 第0位用于表示给水，第1位用于表示排水，第2位用于表示送风，第3位用于表示排风，第4位用于表示加热器A，第5位用于表示加热器B，第6位用于表示补光|

## 3.2 服务

### A. 上报数据
开启给水，当达到高水位会自动停止。
* 编码： `ReportData`
* 消息类型：`0x10`
* 输入参数

|名称|编码|类型|说明|
|---|---|---|---|
|温度|temperature|float|参数响应属性|
|相对湿度|humidity|float|参数响应属性|
|亮度|luminance|float|参数响应属性|
|低水位标志|lowWaterMark|UINT8|参数响应属性|
|高水位标志|highWaterMark|UINT8|参数响应属性|

* 输出参数
  __空__

### B. 开启给水指令
开启给水，当达到高水位会自动停止。
* 编码： `PumpInWaterOn`
* 消息类型：`0x11`
* 输入参数

|名称|编码|类型|是否必要|说明|
|---|---|---|---|---|
|工作挡位|degree|UINT8|是|取值范围：(0, 100]，单位：百分比|
|工作时长|duration|UINT32|是|取值范围：(0, 3600000]，最长1小时，单位：毫秒|

* 输出参数
__空__

### C. 关停给水指令
关停给水。
* 编码： `PumpInWaterOff`
* 消息类型：`0x12`
* 输入参数：
  __空__
* 输出参数：
  __空__

### D. 开启排水指令
开启排水，可按需设定到达低水位会自动停止。
* 编码： `PumpOutWaterOn`
* 消息类型：`0x13`
* 输入参数

|名称|编码|类型|是否必要|说明|
|---|---|---|---|---|
|工作挡位|degree|UINT8|是|取值范围：(0, 100]，单位：百分比|
|工作时长|duration|UINT32|是|取值范围：(0, 3600000]，最长1小时，单位：毫秒|
|低水位时自动停止|autoStopAtLWM|UINT8|否|是否到达低水位时自动停止，`0`表示否，`1`表示是，默认值为：`0`|

* 输出参数
  __空__

### E. 关停排水指令
关停给水。
* 编码： `PumpOutWaterOff`
* 消息类型：`0x14`
* 输入参数：
  __空__
* 输出参数：
  __空__

### F. 开启送风指令
开启送风。
* 编码： `FanInAirOn`
* 消息类型：`0x15`
* 输入参数

|名称|编码|类型|是否必要|说明|
|---|---|---|---|---|
|工作挡位|degree|UINT8|是|取值范围：(0, 100]，单位：百分比|
|工作时长|duration|UINT32|是|取值范围：(0, 3600000]，最长1小时，单位：毫秒|

* 输出参数
  __空__

### G. 关停送风指令
关停给水。
* 编码： `FanInAirOff`
* 消息类型：`0x16`
* 输入参数：
  __空__
* 输出参数：
  __空__

### H. 开启排风指令
开启排风。
* 编码： `FanOutAirOn`
* 消息类型：`0x17`
* 输入参数

|名称|编码|类型|是否必要|说明|
|---|---|---|---|---|
|工作挡位|degree|UINT8|是|取值范围：(0, 100]，单位：百分比|
|工作时长|duration|UINT32|是|取值范围：(0, 3600000]，最长1小时，单位：毫秒|

* 输出参数
  __空__

### I. 关停排风指令
关停排风。
* 编码： `FanOutAirOff`
* 消息类型：`0x18`
* 输入参数：
  __空__
* 输出参数：
  __空__

### J. 开启加热器A指令
开启加热器A。
* 编码： `HeaterAOn`
* 消息类型：`0x19`
* 输入参数

|名称|编码|类型|是否必要|说明|
|---|---|---|---|---|
|工作挡位|degree|UINT8|是|取值范围：(0, 100]，单位：百分比|
|工作时长|duration|UINT32|是|取值范围：(0, 3600000]，最长1小时，单位：毫秒|

* 输出参数
  __空__

### K. 关停加热器A指令
关停加热器A。
* 编码： `HeaterAOff`
* 消息类型：`0x1A`
* 输入参数：
  __空__
* 输出参数：
  __空__

### L. 开启加热器B指令
开启加热器B。
* 编码： `HeaterBOn`
* 消息类型：`0x1B`
* 输入参数

|名称|编码|类型|是否必要|说明|
|---|---|---|---|---|
|工作挡位|degree|UINT8|是|取值范围：(0, 100]，单位：百分比|
|工作时长|duration|UINT32|是|取值范围：(0, 3600000]，最长1小时，单位：毫秒|

* 输出参数
  __空__

### M. 关停加热器B指令
关停加热器B。
* 编码： `HeaterBOff`
* 消息类型：`0x1C`
* 输入参数：
  __空__
* 输出参数：
  __空__

### N. 开启补光指令
开启补光。
* 编码： `LightOn`
* 消息类型：`0x1D`
* 输入参数

|名称|编码|类型|是否必要|说明|
|---|---|---|---|---|
|工作挡位|degree|UINT8|是|取值范围：(0, 100]，单位：百分比|
|工作时长|duration|UINT32|是|取值范围：(0, 3600000]，最长1小时，单位：毫秒|

* 输出参数
  __空__

### O. 关停补光指令
关停补光。
* 编码： `LightOff`
* 消息类型：`0x1E`
* 输入参数：
  __空__
* 输出参数：
  __空__

### Z. 指令下发反馈消息
通知服务器指令的施工结果
* 编码： `FunInvReply`
* 消息类型：`0xF0`
* 输入参数：
  __空__
* 输出参数：

|名称|编码|类型|说明|
|---|---|---|---|
|结果编码|rstCode|INT8|0=不执行，1=表示成功，-1=不支持，小于-1=其他错位原因|
|指令的编码|cmdCode|UINT8|参考各指令的编码|
|附加信息|extInfo|UINT32|附加信息|

## 事件


# 测试样例
* 上报数据样例：
  + `fa 11 01 02 10 0e 3f 8c cc cd 3f 99 99 9a 40 06 66 66 01 00`：t=1.1, h=1.2 l= 2.1
* 开启给水指令：
  + `fa 11 01 03 11 05 02 00 01 02 03`: deg=02, dur=66051
* 关停给水指令：
  + `fa 11 01 03 12 00`
* 开启排水指令：
  + `fa 11 01 03 13 06 03 00 01 02 04 01`: deg=03, dur=66052, auto=1
* 关停排水指令：
  + `fa 11 01 03 14 00`
* 开启送风指令：
  + `fa 11 01 03 15 05 04 00 01 02 05`: deg=04, dur=66053
* 关停送风指令：
  + `fa 11 01 03 16 00`
* 开启排风指令：
  + `fa 11 01 03 17 05 05 00 01 02 06`: deg=05, dur=66054
* 关停排风指令：
  + `fa 11 01 03 18 00`
* 开启加热器A指令：
  + `fa 11 01 03 19 05 06 00 01 02 07`: deg=06, dur=66055
* 关停加热器A指令：
  + `fa 11 01 03 1a 00`
* 开启加热器B指令：
  + `fa 11 01 03 1b 05 07 00 01 02 08`: deg=07, dur=66056
* 关停加热器B指令：
  + `fa 11 01 03 1c 00`
* 开启补光指令：
  + `fa 11 01 03 1d 05 08 00 01 02 09`: deg=08, dur=66057
* 关停补光指令：
  + `fa 11 01 03 1e 00`
* 指令下发反馈消息：
  + `fa 11 01 03 f0 06 01 1e 01 02 03 04`：rstCode=1, cmdCode=0xf0, extInfo=0x01020304
* BETA环境：`59.36.146.21:5905`